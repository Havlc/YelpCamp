import hasOwnProp from '../utils/has-own-prop';
import isNumber from '../utils/is-number';
import toInt from '../utils/to-int';

var tokens = {};

<<<<<<< HEAD
export function addParseToken(token, callback) {
    var i,
        func = callback,
        tokenLen;
=======
export function addParseToken (token, callback) {
    var i, func = callback;
>>>>>>> e850dbdd69512603c0d4d12d8d93e241262e32af
    if (typeof token === 'string') {
        token = [token];
    }
    if (isNumber(callback)) {
        func = function (input, array) {
            array[callback] = toInt(input);
        };
    }
<<<<<<< HEAD
    tokenLen = token.length;
    for (i = 0; i < tokenLen; i++) {
=======
    for (i = 0; i < token.length; i++) {
>>>>>>> e850dbdd69512603c0d4d12d8d93e241262e32af
        tokens[token[i]] = func;
    }
}

<<<<<<< HEAD
export function addWeekParseToken(token, callback) {
=======
export function addWeekParseToken (token, callback) {
>>>>>>> e850dbdd69512603c0d4d12d8d93e241262e32af
    addParseToken(token, function (input, array, config, token) {
        config._w = config._w || {};
        callback(input, config._w, config, token);
    });
}

export function addTimeToArrayFromToken(token, input, config) {
    if (input != null && hasOwnProp(tokens, token)) {
        tokens[token](input, config._a, config, token);
    }
}

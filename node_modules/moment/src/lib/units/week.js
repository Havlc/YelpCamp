import { addFormatToken } from '../format/format';
import { addUnitAlias } from './aliases';
import { addUnitPriority } from './priorities';
import { addRegexToken, match1to2, match2 } from '../parse/regex';
import { addWeekParseToken } from '../parse/token';
import toInt from '../utils/to-int';
<<<<<<< HEAD
=======
import { createLocal } from '../create/local';
>>>>>>> e850dbdd69512603c0d4d12d8d93e241262e32af
import { weekOfYear } from './week-calendar-utils';

// FORMATTING

addFormatToken('w', ['ww', 2], 'wo', 'week');
addFormatToken('W', ['WW', 2], 'Wo', 'isoWeek');

// ALIASES

addUnitAlias('week', 'w');
addUnitAlias('isoWeek', 'W');

// PRIORITIES

addUnitPriority('week', 5);
addUnitPriority('isoWeek', 5);

// PARSING

<<<<<<< HEAD
addRegexToken('w', match1to2);
addRegexToken('ww', match1to2, match2);
addRegexToken('W', match1to2);
addRegexToken('WW', match1to2, match2);

addWeekParseToken(
    ['w', 'ww', 'W', 'WW'],
    function (input, week, config, token) {
        week[token.substr(0, 1)] = toInt(input);
    }
);
=======
addRegexToken('w',  match1to2);
addRegexToken('ww', match1to2, match2);
addRegexToken('W',  match1to2);
addRegexToken('WW', match1to2, match2);

addWeekParseToken(['w', 'ww', 'W', 'WW'], function (input, week, config, token) {
    week[token.substr(0, 1)] = toInt(input);
});
>>>>>>> e850dbdd69512603c0d4d12d8d93e241262e32af

// HELPERS

// LOCALES

<<<<<<< HEAD
export function localeWeek(mom) {
=======
export function localeWeek (mom) {
>>>>>>> e850dbdd69512603c0d4d12d8d93e241262e32af
    return weekOfYear(mom, this._week.dow, this._week.doy).week;
}

export var defaultLocaleWeek = {
<<<<<<< HEAD
    dow: 0, // Sunday is the first day of the week.
    doy: 6, // The week that contains Jan 6th is the first week of the year.
};

export function localeFirstDayOfWeek() {
    return this._week.dow;
}

export function localeFirstDayOfYear() {
=======
    dow : 0, // Sunday is the first day of the week.
    doy : 6  // The week that contains Jan 6th is the first week of the year.
};

export function localeFirstDayOfWeek () {
    return this._week.dow;
}

export function localeFirstDayOfYear () {
>>>>>>> e850dbdd69512603c0d4d12d8d93e241262e32af
    return this._week.doy;
}

// MOMENTS

<<<<<<< HEAD
export function getSetWeek(input) {
=======
export function getSetWeek (input) {
>>>>>>> e850dbdd69512603c0d4d12d8d93e241262e32af
    var week = this.localeData().week(this);
    return input == null ? week : this.add((input - week) * 7, 'd');
}

<<<<<<< HEAD
export function getSetISOWeek(input) {
=======
export function getSetISOWeek (input) {
>>>>>>> e850dbdd69512603c0d4d12d8d93e241262e32af
    var week = weekOfYear(this, 1, 4).week;
    return input == null ? week : this.add((input - week) * 7, 'd');
}

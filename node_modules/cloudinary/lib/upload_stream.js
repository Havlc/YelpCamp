
const Transform = require("stream").Transform;

class UploadStream extends Transform {
  constructor(options) {
    super();
    this.boundary = options.boundary;
  }

  _transform(data, encoding, next) {
<<<<<<< HEAD
    let buffer = ((Buffer.isBuffer(data)) ? data : Buffer.from(data, encoding));
=======
    let buffer = ((Buffer.isBuffer(data)) ? data : new Buffer(data, encoding));
>>>>>>> e850dbdd69512603c0d4d12d8d93e241262e32af
    this.push(buffer);
    next();
  }

  _flush(next) {
<<<<<<< HEAD
    this.push(Buffer.from("\r\n", 'ascii'));
    this.push(Buffer.from("--" + this.boundary + "--", 'ascii'));
=======
    this.push(new Buffer("\r\n", 'ascii'));
    this.push(new Buffer("--" + this.boundary + "--", 'ascii'));
>>>>>>> e850dbdd69512603c0d4d12d8d93e241262e32af
    return next();
  }
}

module.exports = UploadStream;
